<!DOCTYPE html>
<html>
  <meta charset="UTF-8"  name="viewport" content="width=device-width", initial-scale="1" >

  <head>
    <title id="title_change">
    </title>
    <link rel="icon" type="image/x-icon" href="/favicon/favicon.png">
    
    <link rel="stylesheet" type="text/css" href="styles.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.3/html2pdf.bundle.min.js" integrity="sha512-YcsIPGdhPK4P/uRW6/sruonlYj+Q7UHWeKfTAkBW+g83NKM+jMJFJ4iAPfSnVp7BKD4dKMHmVSvICUbE/V1sSw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

  </head>

 

  <form class="form" id="form" onsubmit="saveAlert(); return false">
  <body id="el-to-print">

    <div>

     <div class="div1">
       <div>
       <h3>Cold4you Gewerbekälte GmbH</h3>
       <p style="font-size: large">Wiener Strasse 25, 2100 Korneuburg</p>
       <p style="font-size: large">Tel: 02262 / 235 25 </p>
       <p style="font-size: large">Email: office@cold4you.at </p>
       <p style="font-size: large">www.cold4you.at </p>
       </div>
       <div>
       <h1>Wartungsprotokoll für Klimaanlage-Innengerät</h1>
       </div>
       <div>
        <img src="cold_logo.jpg" alt="image" width="500rem" height="200rem">
       </div>
   
    </div>

      
      </div> 
      
     <div class="flexContainer"> 
     
      <div class="address">
   
      <table class="table">   
        <tr class="addressBox">
        <th class="addressBox">Auftraggeber:</th>
        <th><input  type="text" id="kunde" value="" onchange="myfunction()" size="40" name="" required /></th>
        
        </tr>
        <tr class="addressBox">
          <th class="text_area">Standort:</th>
          <th>
            <textarea class="tableBg2" id="standort" name="address" cols="41" rows="5" required></textarea></th>
        </tr>
       
       
        <tr class="addressBox">
          <th class="addressBox">Anlagenbeschreibung:</th>
          <th><input type="text" id="Anlage" value="" size="40" onchange="myFunction()" required/></th>
        </tr>
    
      <tr class="addressBox">
        <th class="addressBox">Type:</th>
        <th> <input id="type" class="tableBg" type="text" size="40" /></th>
      </tr>
      <tr class="addressBox">
        <th class="addressBox">Kältemittel:</th>
        <th> <input class="tableBg" type="text" size="40"  required/></th>
      </tr>
      <tr class="addressBox">
        <th class="addressBox">Aufstellungsort:</th>
        <th> <input class="tableBg" type="text" size="40" required/></th>
      </tr>
      </table>
      </div>

</div> 
     <div class="flexInner">


  

  

  <div class="divSize">
    <label><input type="checkbox" class="boxSize" /> Sichtkontrolle aller elektrischen und kältetechnischen Rohrleitungen (Sichtkontrolle)</label>
  <br>
  <input type="text"  class="inputBasic" placeholder="Bemerkungen" size="30" maxlength="37"/>
  </div>

  <div class="divSize">
    <label> <input type="checkbox" class="boxSize"  /> Überprüfung aller Verdampfer-Ventilatoren</label>
    <label><input type="checkbox" class="boxSize"/>NZ</label>
  <br>
  <input type="text" class="inputBasic"  placeholder="Bemerkungen" size="30" maxlength="37"/>
  </div>

  <div class="divSize">
    <label><input type="checkbox" class="boxSize" /> Drehzahlregler Verdampfer-Ventilatoren</label>
    <label><input type="checkbox" class="boxSize"/>Nicht vorhanden</label>
  <br>
  <input type="text"  class="inputBasic" placeholder="Bemerkungen" size="30" maxlength="37"/>
  </div>

  <div class="divSize">
    <label><input type="checkbox" class="boxSize" /> Kabelbefestigung</label> 
  <br>
  <input type="text"  class="inputBasic" placeholder="Bemerkungen" size="30" maxlength="37"/>
  </div>


  
  

     
 

      
    <!-- </div> -->
    <!-- <div class="flexInner"> -->
    
          <div class="divSize">
            <label><input type="checkbox" class="boxSize" />
            Funktion Tauwasserablauf Innengeräte</label>
            <input type="text" class="inputBasic" placeholder="Bemerkungen" size="30" maxlength="37"/>
          </div>

          <div class="divSize">
            <label><input type="checkbox" class="boxSize" />
            Filter und Gehäuse Reinigung Innengeräte</label>
            <input type="text" class="inputBasic" placeholder="Bemerkungen" size="30" maxlength="37"/>
          </div>

          <div class="divSize">
            <label><input type="checkbox" class="boxSize" />
          Isolation Kältemittelleitungen Außengeräte zu Innengeräte</label>
            <input type="text" class="inputBasic" placeholder="Bemerkungen" size="30" maxlength="37"/>
          </div>


          <div class="divSize">
            <label ><input type="checkbox" class="boxSize" /> Prüfbücher abgestempelt</label>
            <label><input type="checkbox" class="boxSize" /> Nicht vorhanden</label>
            <br>
            <input type="text" class="inputBasic" placeholder="Bemerkungen"  size="30" maxlength="37"/>
          </div>
         
         
            <div class="divSize3">
            <label>Anmerkungen</label>
            <br>
        
            <textarea class="inputBasicArea" name="Text1" cols="50" rows="8"></textarea>
             </div>

          </div>

          <div class="flexContainer">
            
         <div class="div3">
           <label class="addressBox">Datum:</label>
           <input type="date" id="date1" value="" onchange="myFunction()" >
         

          </div>
          
        <div class="div3">
          <label>Techniker:</label>
          <input type="text" id="techniker" size="20" >
          </div>
       
 
       
      
      <div class="div3">
        <label>Unterschrift:</label>
    
      <div class="flex-row">
        <div class="wrapper">
          <canvas id="signature-pad" width="800" height="300" class="zoom"></canvas>
        </div>
        <div >
          <button class="seeThrough" type="button" id="clear"><span>Löschen </span></button>
        
     
        
          <button type="submit" class="seeThrough"  id="print" >Speichern PDF</button>
       
        </div>
      </div>
      </div>
     
      </div>
      </div>
      </form>

    </body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/signature_pad/1.3.5/signature_pad.min.js" integrity="sha512-kw/nRM/BMR2XGArXnOoxKOO5VBHLdITAW00aG8qK4zBzcLVZ4nzg7/oYCaoiwc8U9zrnsO9UHqpyljJ8+iqYiQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script>

   var canvas = document.getElementById("signature-pad");
   const currentDate = new Date().toISOString().slice(0, 10);
   document.getElementById("date1").value = currentDate;

   
  // canvas.addEventListener('click', resizeCanvas());
  
  //   function resizeCanvas() {
   
  //   canvas.width = 1000;
  //   canvas.height = 600;
   
  // } 
  // window.onresize = resizeCanvas;
  // resizeCanvas();
  
  var signaturePad = new SignaturePad(canvas, {
    backgroundColor: 'rgb(250,250,250)'
    
  });
  
  document.getElementById("clear").addEventListener('click', function(){
    signaturePad.clear();
  })


  function clearButton(){
    document.getElementById(print).class="printClear";
  }

  const form = document.getElementById("form");
  const kunde = document.getElementById("kunde");
  const Anlage = document.getElementById("standort");
  const techniker = document.getElementById("techniker");
  const date1 = document.getElementById("date1");

  const kundeValue_storage = localStorage.getItem("kunde");
  const standortValue_storage = localStorage.getItem("standort");
  const technikerValue_storage = localStorage.getItem("techniker");
  const date1Value_storage = localStorage.getItem("date1");

  document.getElementById("kunde").value = kundeValue_storage;
  document.getElementById("standort").value = standortValue_storage;
  document.getElementById("techniker").value = technikerValue_storage;
  // document.getElementById("date1").value = date1Value_storage;

  

function myFunction() {
var title = document.getElementById("Anlage").value;
var standort = document.getElementById("standort").value.split("\n")[0];
var datum = document.getElementById("date1").value;
var kunde = document.getElementById("kunde").value;



  document.getElementById("title_change").innerHTML = "Wartung_Klima" + kunde + "_" + standort + "_" + title + "_" + datum;
}

function saveAlert(){
  console.log("saveAlert");

  const kundeValue = kunde.value;
  const standortValue = Anlage.value;
  const technikerValue = techniker.value;
  const date1Value = date1.value;

  localStorage.setItem("kunde", kundeValue);
  localStorage.setItem("standort", standortValue);
  localStorage.setItem("techniker", technikerValue);
  localStorage.setItem("date1", date1Value);

   
  
  if (confirm("PDF speichern?")){
    if (signaturePad.isEmpty()) {
      alert("Bitte unterschreiben");
     
    } else {
      savePDF();
    }
  }
  
  else{
    alert("PDF nicht gespeichert");
  }
}



function savePDF() {
 

var element = document.getElementById('el-to-print');
document.getElementById("print").style.opacity = "0";
document.getElementById("clear").style.opacity = "0";
html2pdf().set(opt).from(element).save(document.getElementById("title_change").innerHTML);


}
var opt = {
  margin:       1.1,
  filename:     myFunction(),
  image:        { type: 'jpeg', quality: 1 },
  html2canvas:  { scale: 0.7, dpi: 600, },
  jsPDF:        { unit: 'in', format: 'a1', orientation: 'portrait' },
  
};
  </script>
</html>
